<!DOCTYPE html>
<html lang="pt">
<head>
    <script src="https://unpkg.com/@simplewebauthn/browser/dist/bundle/index.umd.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/lipis/flag-icons@7.2.3/css/flag-icons.min.css"/>
    <link rel="stylesheet" href="cici.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Guineexpress</title>
    <link rel="icon" type="image/png" href="/logo.png">
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/imask"></script>
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#0a1931">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Guineexpress">

    <style>
        /* Define a imagem de fundo em tela cheia */
        body, html {
            height: 100%;
            margin: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .login-wrapper {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-image: linear-gradient(rgba(10, 25, 49, 0.7), rgba(10, 25, 49, 0.7)), url('https://images.unsplash.com/photo-1586528116311-ad8dd3c8310d?q=80&w=2070&auto=format&fit=crop');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            padding: 20px;
        }

        /* Efeito Glassmorphism no Cart√£o */
        .login-card {
            background: rgba(255, 255, 255, 0.15); 
            backdrop-filter: blur(12px); 
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            padding: 40px;
            width: 100%;
            max-width: 400px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            color: #fff; 
        }

        .company-header h1 {
            color: #fff;
            margin-bottom: 5px;
            font-weight: 800;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.5);
        }
        .company-header p {
            color: #e0e0e0;
            margin: 0;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }
        
        .login-card h3 {
            color: #009ee3; 
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
        }

        .form-group label {
            color: #fff;
            font-weight: 500;
        }

        .form-control {
            background: rgba(255, 255, 255, 0.9);
            border: none;
            color: #333;
        }
        .form-control:focus {
            background: #fff;
            box-shadow: 0 0 8px rgba(0, 158, 227, 0.6);
        }

        #role-selector .btn {
            border: 1px solid rgba(255,255,255,0.4);
            backdrop-filter: blur(5px);
        }
        #btn-employee, #btn-admin {
            background: rgba(255, 255, 255, 0.2) !important;
            color: #fff !important;
        }
        #btn-employee:hover, #btn-admin:hover {
            background: rgba(255, 255, 255, 0.4) !important;
        }

        #forgot-pass, #register-link {
            color: #fff !important;
            text-decoration: underline;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }
        #forgot-pass:hover, #register-link:hover {
            color: #009ee3 !important;
        }
        
        #register-form p { color: #fff; }
    </style>

<script>
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
            navigator.serviceWorker.register('/sw.js')
                .then(reg => console.log('App registrado'))
                .catch(err => console.log('Erro PWA', err));
        });
    }
</script>
</head>
<body>

<div class="login-wrapper">
    <div class="login-card">
        <div class="company-header" style="text-align: center; margin-bottom: 25px;">
            <img src="/logo.png" alt="Logo Guineexpress" class="login-logo">
            <h1>Guineexpress</h1>
            <p>Log√≠stica Internacional</p>
            <p style="font-size: 11px; margin-top: 8px;">üìç Av. Trist√£o Gon√ßalves, 1203 - (85) 98239-207</p>
        </div>

        <div id="role-selector" class="form-group" style="display: flex; gap: 8px; justify-content: center; margin-bottom: 25px;">
            <button onclick="setRole('client')" class="btn btn-primary" id="btn-client" style="flex: 1; padding: 8px;">Cliente</button>
            <button onclick="setRole('employee')" class="btn" id="btn-employee" style="flex: 1; padding: 8px;">Staff</button>
            <button onclick="setRole('admin')" class="btn" id="btn-admin" style="flex: 1; padding: 8px;">Admin</button>
        </div>

        <form id="login-form">
            <h3 style="text-align:center; margin-bottom:20px;">Acessar Conta</h3>
            
            <div class="form-group">
                <label>Email ou Celular</label>
                <input type="text" id="login-user" class="form-control" placeholder="ex: lelo@guineexpress.com" required autocomplete="username">
            </div>
            
            <div class="form-group">
                <label>Senha</label>
                <input type="password" id="login-pass" class="form-control" required autocomplete="current-password">
            </div>

            <button type="submit" class="btn btn-accent" style="width: 100%; font-weight: bold; background: #009ee3; color: white; margin-top: 10px; font-size: 16px;">ENTRAR</button>
            
            <button id="btn-biometria-login" type="button" onclick="loginComBiometria()" style="width: 100%; display: flex; align-items: center; justify-content: center; gap: 10px; font-weight: bold; background: #0a1931; border: 1px solid #d4af37; color: #d4af37; margin-top: 10px; font-size: 15px; padding: 10px; border-radius: 8px; cursor: pointer;">
    <i class="fas fa-fingerprint" style="font-size: 20px;"></i> Entrar com Impress√£o Digital
</button>

            <div id="client-links" class="links-inferiores">
    <button type="button" id="btn-cadastro" onclick="showRegister()" class="btn-cadastro-destaque">Criar Conta Agora</button>
    <button type="button" onclick="openRecoverModal()" class="btn-senha-destaque">Esqueci minha senha</button>
</div>
        </form>

        <form id="register-form" class="hidden">
            <h3 style="text-align:center; margin-bottom:20px;">Novo Cliente</h3>
            
            <div class="form-group">
                <label>Pa√≠s</label>
               <select id="reg-country" class="form-control" onchange="updateMasks()" required>
    <option value="" disabled selected>Selecione um pa√≠s...</option>
    <option value="GW">Guin√©-Bissau</option>
    <option value="BR">Brasil</option>
    <option value="PT">Portugal</option>
    <option value="SN">Senegal</option>
    <option value="MA">Marrocos</option>
    <option value="US">Estados Unidos</option>
    <option value="FR">Fran√ßa</option>
    <option value="ES">Espanha</option>
    <option value="UK">Inglaterra</option>
    <option value="BE">B√©lgica</option>
    <option value="CV">Cabo Verde</option>
</select>
            </div>

            <div class="form-group">
                <input type="text" id="reg-name" class="form-control" placeholder="Nome Completo" required autocomplete="name">
            </div>
            <div class="form-group">
                <input type="email" id="reg-email" class="form-control" placeholder="Gmail ou Hotmail" required autocomplete="email">
            </div>
            <div class="form-group">
                <input type="text" id="reg-phone" class="form-control" placeholder="Celular" required autocomplete="tel">
            </div>
            <div class="form-group">
                <input type="text" id="reg-doc" class="form-control" placeholder="Documento (ID/CPF)" required autocomplete="off">
            </div>
            
            <div class="form-group">
                <input type="password" id="reg-pass" class="form-control" placeholder="Senha" required autocomplete="new-password">
            </div>
            
            <div class="form-group">
                <input type="password" id="reg-pass2" class="form-control" placeholder="Confirmar Senha" required autocomplete="new-password">
            </div>
            
            <button type="submit" class="btn btn-primary" style="width: 100%; font-size: 16px; margin-top: 10px;">CADASTRAR</button>
            <p onclick="showLogin()" style="text-align:center; margin-top:20px; font-size:14px; cursor:pointer;">&larr; Voltar para Login</p>
        </form>
    </div>
</div>

<div id="modal-recover" class="modal-overlay hidden"></div>

<div id="install-banner" style="display: none; position: fixed; bottom: 0; left: 0; width: 100%; background: #0a1931; color: white; padding: 15px; justify-content: space-between; align-items: center; z-index: 9999; box-shadow: 0 -4px 10px rgba(0,0,0,0.3); border-top-left-radius: 15px; border-top-right-radius: 15px;">
    <div style="display: flex; align-items: center; gap: 12px;">
        <img src="/logo.png" style="width: 45px; height: 45px; border-radius: 10px; border: 2px solid #d4af37;">
        <div>
            <h4 style="margin: 0; font-size: 15px; font-weight: bold;">Guineexpress App</h4>
            <p style="margin: 0; font-size: 12px; color: #ccc;">Instale para acesso r√°pido</p>
        </div>
    </div>
    <div style="display: flex; gap: 10px; align-items: center;">
        <button onclick="hideInstallBanner()" style="background: transparent; border: none; color: #aaa; font-size: 13px;">Agora n√£o</button>
        <button onclick="installPWA()" class="btn btn-primary" style="background: #d4af37; color: #000; font-weight: bold; padding: 8px 16px; border-radius: 20px; font-size: 14px;">Instalar</button>
    </div>
</div>

<script src="cici.js"></script>
<script src="script.js"></script>
</body>
</html>